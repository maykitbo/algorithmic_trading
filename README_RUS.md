# Algorithmic trading

Реализация проекта Algorithmic trading.


## Contents

1. [Chapter I](#chapter-i) \
    1.1. [Introduction](#introduction)
2. [Chapter II](#chapter-ii) \
    2.1. [Интерполяция](#интерполяция)  
    2.2. [Интерполяционный многочлен Ньютона](#интерполяционный-многочлен-ньютона)  
    2.3. [Интерполяция кубическими сплайнами](#интерполяция-кубическими-сплайнами)  
    2.4. [Аппроксимация](#аппроксимация)  
    2.5. [Метод наименьших квадратов](#метод-наименьших-квадратов)
3. [Chapter III](#chapter-iii) \
    3.1. [Part 1](#part-1-интерполяция-таблично-заданных-функций-методом-кубических-сплайнов)  
    3.2. [Part 2](#part-2-аппроксимация-таблично-заданных-функций)  
    3.3. [Part 3](#part-3-дополнительно-интерполяция-таблично-заданных-функций-методом-полинома-ньютона-n-ой-степени)
    3.4. [Part 4](#part-4-дополнительно-исследование-временных-характеристик)  
    3.5. [Part 5](#part-5-дополнительно-аппроксимация-с-учетом-весов)  

## Chapter I  

![Algorithmic trading](misc/images/Algorithmic_trading.JPG)

`-` В общем, Боб же тебе рассказал суть задачи?

`-` Да, реализация простейших методов интерполяции и аппроксимации. Но я так и не поняла для чего это все нужно. Он что-то говорил про инвестиции и клиентов, но скорее был больше занят происходящим на своем экране, - ответила Ева Дейву, ведущему разработчику в финансовом отделе, к которому ее отдали в помощь. Боб упоминал в разговоре с Евой про нехватку людей у них сейчас и накопившиеся срочные задачки.

`-` Именно так. Нужно это сейчас не совсем нам - это скорее заказ от отдела РАИ.

`-` Погоди, РАИ? Что это еще за отдел? Я понимаю, компания у нас большая, на каждом континенте сидит, но про такой отдел вообще слышу впервые.

`-` Забавно, что ты не в курсе. Это отдел по Разработке Ассистивного Интеллекта. ИИ помощники короче. Между прочим, там всем заправляет Алиса с помощью в виде Чарли.

`-` Алиса? Она же занималась простой детекцией объектов на видео для систем наблюдения.

`-` Уже как год нет. Про РАИ знают, конечно, немногие: NDA, корпоративная тайна, миллиарды долларов на кону, все дела. Но вы вроде как активно общались, поэтому.. не знаю, - Дейв прервал свои очевидно неудачные попытки утешить расcтроенную и ошарашенную Еву. Она судорожно пыталась сообразить, почему ее подруга ничего не рассказывала. 

`-` Так вот, да, касательно задачи, - продолжил Дейв как ни в чем не бывало, - нас попросили написать модуль, который мог бы помогать и сопровождать клиентов на их торгах.. - Ева уже особо не вникала в то, что говорил Дейв. Сейчас ее всю занимала только неожиданная для нее новость. И хотя это объясняло недавнее поведение Алисы, некоторые вещи все же оставались непонятными, и их еще предстояло выяснить.

## Introduction

В данном проекте вам предстоит познакомиться с алгоритмами интерполяции и аппроксимации. Используя эти алгоритмы, вы сможете построить графики вероятностного поведения котировок акций и прогнозов их курсов для обозримого будущего на основе исторических данных без учета внешних факторов __*__.


## Chapter II

### Интерполяция

*Интерполяция* – способ нахождения промежуточных значений величины по имеющемуся дискретному набору известных значений.

Интерполяцию функций применяют в случае, когда требуется найти значение функции $`y(х)`$ при значении аргумента $`x`$, принадлежащего интервалу $`[x_0, ..., x_n]`$ ($`x_0, ..., x_n`$ - значения, заданные в таблице), но не совпадающего по значению ни с одним известным значением из этого интервала.

Во многих случаях аналитическое выражение функции $`y(х)`$ не известно и получить значение этой функции по таблице ее значений не представляется возможным. Поэтому вместо нее строят другую функцию $`f(x)`$, которая легко вычисляется и имеет ту же таблицу значений 
(совпадает с ней в точках $`x_0, x_1, x_2,..., x_n`$), что и $`y(x)`$.

Нахождение приближенной функции называется интерполяцией, а точки $`x_0, x_1, x_2, ..., x_n`$ – узлами интерполяции.
Обычно интерполирующую функцию ищут в виде полинома $`n`$ степени.

### Интерполяционный многочлен Ньютона

Если узлы интерполяции, равноотстоящие по величине, так что $`x_i + 1 – x = h = const`$,
где $`h`$ – шаг интерполяции, т.е. $`x_i = x_0 + n * h`$, то интерполяционный многочлен можно записать в форме, предложенной Ньютоном.

Первая интерполяционная формула Ньютона ищется в виде: $`Pn(x) = a_0 + a_1(x - x_0) + a_2(x - x_0)(x - x_1) + ... + a_n(x - x_0)...(x - x_n)`$.

### Интерполяция кубическими сплайнами

Интерполяция кубическими сплайнами является частным случаем кусочно-полиномиальной интерполяцией. 
В этом специальном случае между любыми двумя соседними узлами функция интерполируется кубическим полиномом. 
Его коэффициенты на каждом интервале определяются из условий сопряжения в узлах:

$`f_i = y_i, f'(x_i - 0) = f'(x_i + 0), f''(x_i - 0) = f''(x_i + 0), i = 1, 2, ..., n - 1`$, где $`x_i + 0`$ и $`x_i - 0`$ - окрестности точки $`x_i`$.

Кроме того, на границе при $`x = x_0`$ и $`x = x_n`$ ставятся условия:

$`f''(x_0) = 0, f''(x_n) = 0`$

### Аппроксимация

*Аппроксимация* – замена одних математических объектов другими, в том или ином смысле близкими к исходным.

При интерполировании интерполирующая функция строго проходит через узловые точки таблицы вследствие того, что количество
коэффициентов в интерполирующей функции равно количеству табличных значений.
Аппроксимация – метод приближения, при котором для нахождения дополнительных значений, отличных от табличных данных, приближенная
функция проходит не через узлы интерполяции, а между ними.

Если аналитическое выражение функции неизвестно или весьма сложно, то возникает задача найти такую эмпирическую формулу, значения которой мало отличались бы от опытных данных.

### Метод наименьших квадратов

Суть метода наименьших квадратов заключается в нахождении таких значений $`х_i`$, при которых сумма квадратов отклонений (ошибок) $`e_i = y_i – f_i(x)`$ будет стремиться к минимуму.

Т.к. каждое значение $`х_i`$ в общем случае «сопровождается» соответствующим коэффициентом $`a_i (i = 0, 1, 2, ..., n)`$, то задача сводится к нахождению данных коэффициентов.


## Chapter III

## Part 1. Интерполяция таблично заданных функций методом кубических сплайнов

Необходимо построить график таблично заданной функции котировок акций с использованием метода кубических сплайнов:

- Программа должна быть разработана на языке C++ стандарта C++17
- Код программы должен находиться в папке src в ветке develop
- При написании кода необходимо придерживаться Google Style
- Сборка программы должна быть настроена с помощью Makefile со стандартным набором целей для GNU-программ: all, install, uninstall, clean, dvi, dist. Установка может вестись в любой другой произвольный каталог
- В программе должен быть реализован графический пользовательский интерфейс, на базе любой GUI-библиотеки с API для C++ (Qt, SFML, GTK+, Nanogui, Nngui, etc.)
- Данные загружаются в программу из файла с котировками акций с расширением .csv:
  - В файле данные представлены в виде таблицы, где первый столбец - дата, второй столбец - значение функции (примеры файлов с данными находятся в папке materials)
- При загрузке нового файла с данными очистить поле для рисования графиков
- Пользователем задаётся количество точек, по которым должен быть построен график (количество точек не меньше, чем в загруженном файле)
- Все точки распределены равномерно между начальной и конечной датами
- На итоговом графике соседние точки должны быть соединены прямой линией
- Должен быть реализован метод интерполяции *кубическим сплайном*
- В интерфейсе должна быть кнопка для отрисовки графика, полученного кубическим сплайном
- В интерфейсе должна быть кнопка очистки поля для рисования графиков (поле очищается только при нажатии на эту кнопку или загрузке новых данных)
- На поле может быть одновременно изображено до 5 графиков (при этом все графики разного цвета)
  - Если на поле уже отображено 5 графиков, заблокировать кнопки отрисовки новых графиков
- В интерфейсе должна быть указана следующая информация о графиках:
  - Цвет
  - Имя файла, из которого были взяты данные
- Предусмотреть возможность по заданному пользователем значению аргумента (дата и время) вывести значения функции котировок акций, полученные методом интерполяции

## Part 2. Аппроксимация таблично заданных функций

Необходимо построить график таблично заданной функции котировок акций с использованием *метода наименьших квадратов*. \
При этом график должен покрывать больший промежуток времени, чем исходные данные:
- Для графиков из этого задания в интерфейсе должно быть отведено отдельное поле для отрисовки
- При загрузке нового файла с данными очистить поле для рисования графиков
- Пользователем задаётся количество точек, по которым должен быть построен график (количество точек не меньше, чем в загруженном файле)
- Все точки распределены равномерно между начальной и конечной датами
- На итоговом графике соседние точки должны быть соединены прямой линией
- На графике должны быть явно отмечены точки, заданные в загруженном файле:
  - Радиус этих точек больше толщины кривой графика
  - Цвет этих точек не совпадает с цветами графиков на поле
- Пользователем задается количество дней `M`, на которое нужно продлить график (на сколько дней вперёд мы хотим предсказать курс акций)
- При добавлении на поле отрисовки нового графика аппроксимации, у которого `M` отличается от `M` уже отрисованных графиков, предварительно выполнить очистку поля отрисовки
- На поле может быть одновременно изображено до 5 графиков с одним и тем же значением числа дней `M` (при этом все графики должны быть разного цвета)
- В интерфейсе должна быть кнопка для отрисовки графика, полученного полиномом заданной в данный момент степени
- В интерфейсе должно быть поле для ввода степени полинома
- В интерфейсе должна быть кнопка очистки поля для рисования графиков аппроксимации
- В интерфейсе указана следующая информация о графиках:
  - Цвет
  - Файл, из которого взяты данные
  - Степень полинома
- Если на поле уже отображено 5 графиков, заблокировать кнопки отрисовки новых графиков аппроксимации
- Предусмотреть возможность по заданному пользователем значению аргумента (дата и время) вывести значение аппроксимирующей функции для заданной степени полинома

## Part 3. Дополнительно. Интерполяция таблично заданных функций методом полинома Ньютона n-ой степени

Необходимо построить график таблично заданной функции котировок акций с использованием метода полинома Ньютона n-ой степени:

- Программа должна быть разработана на языке C++ стандарта C++17
- Код программы должен находиться в папке src в ветке develop
- При написании кода необходимо придерживаться Google Style
- Сборка программы должна быть настроена с помощью Makefile со стандартным набором целей для GNU-программ: all, install, uninstall, clean, dvi, dist. Установка может вестись в любой другой произвольный каталог
- В программе должен быть реализован графический пользовательский интерфейс, на базе любой GUI-библиотеки с API для C++ (Qt, SFML, GTK+, Nanogui, Nngui, etc.)
- Данные загружаются в программу из файла с котировками акций с расширением .csv:
  - В файле данные представлены в виде таблицы, где первый столбец - дата, второй столбец - значение функции (примеры файлов с данными находятся в папке materials)
- При загрузке нового файла с данными очистить поле для рисования графиков
- Пользователем задаётся количество точек, по которым должен быть построен график (количество точек не меньше, чем в загруженном файле)
- Все точки распределены равномерно между начальной и конечной датами
- На итоговом графике соседние точки должны быть соединены прямой линией
- Должен быть реализован метод интерполяции *полиномом Ньютона n-ой степени*
- В интерфейсе должна быть кнопка для отрисовки графика, полученного полиномом Ньютона n-ой степени
- В интерфейсе должно быть поле для ввода степени полинома Ньютона
- В интерфейсе должна быть кнопка очистки поля для рисования графиков (поле очищается только при нажатии на эту кнопку или загрузке новых данных)
- На поле может быть одновременно изображено до 5 графиков (при этом все графики разного цвета)
  - Если на поле уже отображено 5 графиков, заблокировать кнопки отрисовки новых графиков
- В интерфейсе должна быть указана следующая информация о графиках:
  - Цвет
  - Имя файла, из которого были взяты данные
  - Метод интерполяции (с указанием степени, если это полином Ньютона)
- Предусмотреть возможность по заданному пользователем значению аргумента (дата и время) вывести значения функции котировок акций, полученные обоими методами интерполяции

## Part 4. Дополнительно. Исследование временных характеристик

Провести исследование временных характеристик интерполяций методами кубических сплайнов и полиномом Ньютона в зависимости от числа высчитываемых точек.

- Пользователем задается максимальное число точек `k` и число разбиений `h`
- Минимальным числом `k` выступает число записей в исходной таблице
- Необходимо измерить время расчёта значений алгоритмами интерполяции сплайнами и методом Ньютона в зависимости от изменения числа точек. Всего должно быть `h` измерений времени работы алгоритма, первым из которых является измерение для $`k_1`$, где $`k_1`$ равно числу точек в исходном файле, а последним является $`k_h`$, где $`k_h`$ равно максимальному числу точек `k`, которое вводится через графический интерфейс.
- Измерение времени на каждой итерации должно проводиться 10 раз и результатом считать среднее арифметическое от полученных значений
- На одном поле построить два графика зависимостей времени нахождения значений от количества точек `k` для двух методов интерполяции

**Пример** \
Пользователем задаётся число точек *k = 1000000* и число разбиений *h = 11*. На вход подаётся файл, который содержит в себе 100 записей, тогда будет рассчитано среднее время работы алгоритмов интерполяции сплайнами и методом Ньютона для следующего числа точек: 

    k1 = 100, t1_splain = <среднее_время_расчёта_100_точек_сплайнами>, t1_newton = <среднее_время_расчёта_100_точек_методом_Ньютона> 
    k2 = 100090, t2_splain = <среднее_время_расчёта_100090_точек_сплайнами>, t2_newton = <среднее_время_расчёта_100090_точек_методом_Ньютона> 
    k3 = 200080, t3_splain = <среднее_время_расчёта_200080_точек_сплайнами>, t3_newton = <среднее_время_расчёта_200080_точек_методом_Ньютона> 
    k4 = 300070, t4_splain = <среднее_время_расчёта_300070_точек_сплайнами>, t4_newton = <среднее_время_расчёта_300070_точек_методом_Ньютона> 
    k5 = 400060, t5_splain = <среднее_время_расчёта_400060_точек_сплайнами>, t5_newton = <среднее_время_расчёта_400060_точек_методом_Ньютона> 
    k6 = 500050, t6_splain = <среднее_время_расчёта_500050_точек_сплайнами>, t6_newton = <среднее_время_расчёта_500050_точек_методом_Ньютона> 
    k7 = 600040, t7_splain = <среднее_время_расчёта_600040_точек_сплайнами>, t7_newton = <среднее_время_расчёта_600040_точек_методом_Ньютона> 
    k8 = 700030, t8_splain = <среднее_время_расчёта_700030_точек_сплайнами>, t8_newton = <среднее_время_расчёта_700030_точек_методом_Ньютона> 
    k9 = 800020, t9_splain = <среднее_время_расчёта_800020_точек_сплайнами>, t9_newton = <среднее_время_расчёта_800020_точек_методом_Ньютона> 
    k10 = 900010, t10_splain = <среднее_время_расчёта_900010_точек_сплайнами>, t10_newton = <среднее_время_расчёта_900010_точек_методом_Ньютона> 
    k11 = 1000000, t11_splain = <среднее_время_расчёта_1000000_точек_сплайнами>, t11_newton = <среднее_время_расчёта_1000000_точек_методом_Ньютона> 

В результате будет построено два графика, каждый из которых состоит из 11 точек:
* зависимость числа точек `k` от `t_splain`
* зависимость числа точек `k` от `t_newton`

## Part 5. Дополнительно. Аппроксимация с учетом весов

Добавить в табличную функцию котировок акций веса и учесть их при построении графиков.

- Добавить в файлы с исходными данными 3-й столбец: веса точек
- У всех значений, у которых вес не указан, он считается равным 1
- Адаптировать метод наименьших квадратов, чтобы он учитывал веса точек
- Добавить возможность построения одновременно следующих 4-х графиков:
  - Со степенью полинома 1 для таблицы, в которой веса заданы пользователем
  - Со степенью полинома 2 для таблицы, в которой веса заданы пользователем
  - Со степенью полинома 1 для таблицы, в которой все веса равны 1
  - Со степенью полинома 2 для таблицы, в которой все веса равны 1
- Найти такие веса, при которых изменится знак углового коэффициента прямой, соответствующей 1 степени полинома
- Сохранить в репозиторий в папку src файл part4.csv, в котором веса заданы так, что выполняется условие предыдущего пункта

__*__ - Не является инвестиционной рекомендацией.


💡 [Нажми тут](https://forms.yandex.ru/cloud/64181fd2eb61462527cee6b5/), **чтобы поделиться с нами обратной связью на этот проект**. Это анонимно и поможет команде Педаго сделать твоё обучение лучше.
